Cost-based optimization requires statistical information on data in order to calculate cost function values for each plan. However, upon the start of a streaming query execution no information about the data, such as its arrival rate, is available. 
Therefore, in order to properly apply cost-based optimization to streaming SQL queries, it is necessary to collect data statistics over the course of query execution. 
Moreover, since we possess no definitive knowledge about the arriving data, in order to utilize an optimal plan for the upcoming windows, we need to predict statistics for each next window based on statistics for previous windows. To this end, we identify two challenges in using statistics for streaming query optimization:

\begin{itemize}
    \item \textbf{Engineering}:
    Statistical information on stream elements, such as their arrival rate, needs to be collected during execution at runtime without seriously affecting the performance of a distributed SPE. % which can present certain challenges since there is no centralized point at which to collect statistics so we'd need to aggregate it somehow which can affect the performance of the system itself
    \item \textbf{Research}
    Next window statistics should be predicted using statistics collected for previous windows. We assume that previous window statistics would present a decent baseline; however, this assumption needs to be tested. it is a expected that a simple baseline wil be good enough in most simple cases but in general prediction is not an easy task.
\end{itemize}

Popular SPEs and frameworks for defining streaming workflows do not offer any statistics fetching or predicting. For example, Apache Beam, which utilizes Apache Calcite, a dynamic data management framework, for its SQL processing functionality, passes constant values to the query planner instead of any actual data statistics.

