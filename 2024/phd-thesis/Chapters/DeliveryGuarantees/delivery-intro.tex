%%% fs-state-intro - Introduction

Delivery guarantees describe a contract regarding {\em which data} will be processed and released in case of failures. 
Exactly-once is the strongest and the most valuable guarantee from the user perspective as it ensures that input elements are processed atomically and are not lost. These notions are seemingly simple but shadow the dependency of an output item on the {\em system state} as well as on the input item. 
Streaming systems face a need to recover computations consistently with previous input data, the current system state, and with the already delivered elements.
This requirement makes failure recovery mechanisms somewhat complicated.

As we showed in~\ref{thesis-intro-challenges} there is a lack of a  formal model for delivery guarantees. 
Misunderstandings of delivery guarantees frequently cause debates and discussions~\cite{JerryPengStreamIO, PaperTrail}. Without a formal model, it is hard to observe similarities and distinctions between existing solutions and to recognize their limitations. In this chapter, we introduce a formal model of stream processing that captures delivery guarantees existing in most of the state-of-the-art systems.

Another important property of streaming engines is {\em a determinism}. 
The determinism means that repeated runs of the system on the same data produce the same results. It is commonly considered as a challenging task~\cite{Zacheilas:2017:MDS:3093742.3093921}. On the other hand, this property is desirable because it implies reproducibility and predictability. Intuitively, determinism is connected with delivery guarantees~\cite{Stonebraker:2005:RRS:1107499.1107504}, but, to the best of our knowledge, this relation has not been deeply investigated. In this chapter, we demonstrate that the property of determinism can mitigate an overhead on exactly-once. 

The rest of the chapter is structured as follows:
we introduce our formal framework in Section~\ref{fs-formalism},
the connection between exactly-once guarantee and determinism is discussed in Section~\ref{fs-determinism-eo}, 
the existing implementations of exactly-once in terms of the proposed formal framework are described in Section~\ref{fs-eo-impl}, Section~\ref{fs-conclusion-seciton} concludes the main outcomes of the chapter.
% implementation details of exactly-once over determinism are mentioned in section~\ref{fs-consistency-section}, 
% experiments that demonstrate the feasibility of the proposed concept are detailed in section~\ref{fs-experiments-seciton}, 
% and we discuss prior works on the topic in section~\ref{fs-related-seciton}. 
